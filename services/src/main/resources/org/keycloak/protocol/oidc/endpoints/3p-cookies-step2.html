<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
  </head>
  <body>
    <script type="module">
      // Check if the previously placed cookies exist to detect support for 3rd-party access.
      const hasAccess = document.cookie.includes("KEYCLOAK_3P_COOKIE");

      // If so, clear the cookies, so they can no longer be used.
      if (hasAccess) {
        document.cookie = "KEYCLOAK_3P_COOKIE_SAMESITE=; Max-Age=0";
        document.cookie = "KEYCLOAK_3P_COOKIE=; Max-Age=0";
      }

      // Signal 3rd-party access support to the page embedding this iframe.
      window.parent.postMessage(hasAccess ? "supported" : "unsupported", "*");
    </script>
  </body>
</html>
